{#######################################################}
{#                                                     #}
{#   Sticky Mobile Menu - Atom for Gantry              #}
{#                                                     #}
{#   Purpose: This project enables control over the    #}
{#            mobile menu behavior. Hence, a click     #}
{#            on the hamburger menu always shows       #}
{#            the current selected sub menu items      #}
{#            instead the root menu items.             #}
{#                                                     #}
{#   Author: Andreas Kar (thex) <andreas.kar@gmx.at>   #}
{#                                                     #}
{#######################################################}

{% extends '@nucleus/partials/particle.html.twig' %}

{% set scriptType = 'text/javascript' %}

{% set jsPlace = particle.js.placement|default('head') %}
{% set jsPath = 'gantry-theme://' ~ particle.js.path|default('js/sticky-mobile-menu.js') %}
{% set jsPrior = particle.js.priority|default(0) %}
{% set jsExec = '' %}

{% if particle.js.execution == 'defer' or particle.js.execution == 'both' %}
    {% set jsExec = 'defer="defer"' %}
{% endif %}

{% if particle.js.execution == 'both' %}
    {% set jsExec = jsExec ~ ' ' %}
{% endif %}

{% if particle.js.execution == 'async' or particle.js.execution == 'both' %}
    {% set jsExec = jsExec ~ 'async="async"' %}
{% endif %}

{% if jsExec is not empty %}
    {% set jsExec = ' ' ~ jsExec %}
{% endif %}

{% set enableMemory = (particle.memorize == 1 ? "true" : "false") %}
{%- block particle -%}
    {%- scripts in jsPlace with { priority: jsPrior } -%}
        <script>
            window.StickyMobileMenu.memory = {{ enableMemory|e('js') }};
            window.StickyMobileMenu.mode = {{ particle.mode|e('js') }};
        </script>
        <script type="{{scriptType}}" src="{{url(jsPath)}}"{{jsExec}}></script>
    {%- endscripts -%}
{%- endblock -%}